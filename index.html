<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>íˆ¬ìì˜¨ë„</title>

  <style>
    :root{
      --bg:#0b2336;
      --card:#112d47;
      --text:#ffffff;
      --muted:rgba(255,255,255,.72);
      --line:rgba(255,255,255,.10);
      --accent:#6ea7ff;

      --good:#1fcf78;
      --warn:#f6c64a;
      --bad:#ff5a5f;

      --paperTex:none;
      --paperOpacity:0;
      --titleFont:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      --bodyFont:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: var(--bodyFont);
      background: var(--bg);
      color: var(--text);
    }

    .wrap{
      max-width: 420px;
      margin: 0 auto;
      padding: 18px 14px 96px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      letter-spacing:-.5px;
      font-family: var(--titleFont);
      font-size: 26px;
    }

    .iconBtn{
      width:42px; height:42px;
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      border:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
    }

    .card{
      position:relative;
      background: var(--card);
      border:1px solid var(--line);
      border-radius: 22px;
      padding: 16px;
      overflow:hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      margin-bottom: 14px;
    }

    .label{
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 10px;
      font-weight: 700;
    }

    .center{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding: 6px 0 2px;
      gap: 10px;
    }

    .gauge{
      width: 240px;
      height: 240px;
      border-radius: 50%;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      border: 1px solid rgba(255,255,255,.08);
      background: conic-gradient(var(--good) 0deg 270deg, rgba(255,255,255,.12) 270deg 360deg);
    }
    .gauge::after{
      content:"";
      position:absolute;
      width: 172px;
      height: 172px;
      border-radius:50%;
      background: rgba(0,0,0,.28);
      border:1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(4px);
    }
    .score{
      position:relative;
      z-index:2;
      font-size: 54px;
      font-weight: 900;
      letter-spacing:-1px;
    }

    .state{
      font-size: 30px;
      font-weight: 900;
      letter-spacing:-.8px;
      margin-top: 4px;
      font-family: var(--titleFont);
    }

    .summary{
      text-align:center;
      color: var(--muted);
      line-height:1.45;
      margin-top: 2px;
      padding: 0 8px;
    }

    .btn{
      width:100%;
      padding: 16px 16px;
      border-radius: 18px;
      border: 0;
      font-size: 18px;
      font-weight: 900;
      background: var(--accent);
      color:#0b1220;
      cursor:pointer;
      box-shadow: 0 14px 28px rgba(0,0,0,.25);
      margin-top: 12px;
    }
    .btn:active{ transform: translateY(1px); }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    /* ë°°ë„ˆ ê´‘ê³  */
    .adBar{
      display:none;
      border-radius: 20px;
      border:1px dashed rgba(255,255,255,.22);
      background: rgba(255,255,255,.05);
      padding: 14px;
    }
    .adTitle{
      font-weight: 900;
      margin-bottom: 6px;
      letter-spacing:-.3px;
    }
    .adBody{
      font-size: 14px;
      color: var(--muted);
      line-height: 1.4;
    }
    .adActions{
      display:flex;
      gap:10px;
      margin-top: 10px;
      flex-wrap:wrap;
    }
    .chipBtn{
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      color: var(--text);
      font-weight: 800;
      cursor:pointer;
      user-select:none;
      font-size: 14px;
    }
    .chipBtn.primary{
      background: var(--accent);
      color:#081322;
      border:0;
    }

    /* ì ê¸ˆ ì˜¤ë²„ë ˆì´ (ê²ŒìŠ¤íŠ¸ì—ì„œ ì €ì¥/ì•Œë¦¼ ì ê¸ˆ) */
    .lockWrap{ position:relative; }
    .lockOverlay{
      display:none;
      position:absolute;
      inset:0;
      border-radius: inherit;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:10px;
      padding: 18px;
      text-align:center;
    }
    .lockOverlay .msg{ font-weight: 900; font-size: 18px; }
    .lockOverlay .sub{ color: rgba(255,255,255,.85); font-size: 14px; line-height:1.4; }

    .mini{
      font-size: 13px;
      color: rgba(255,255,255,.62);
      line-height: 1.45;
    }

    /* í•˜ë‹¨ ë„¤ë¹„ */
    .bottomNav{
      position: fixed;
      left:0; right:0; bottom:0;
      background: rgba(0,0,0,.38);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255,255,255,.08);
      padding: 10px 8px 12px;
    }
    .bottomInner{
      max-width: 420px;
      margin:0 auto;
      display:flex;
      justify-content:space-around;
      gap:6px;
    }
    .navItem{
      flex:1;
      text-align:center;
      color: rgba(255,255,255,.70);
      font-size: 12px;
      padding: 10px 6px;
      border-radius: 16px;
      border:1px solid transparent;
      user-select:none;
    }
    .navItem.active{
      color: var(--text);
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.10);
      font-weight: 900;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">ğŸŒ¡ï¸ íˆ¬ìì˜¨ë„</div>
      <div class="iconBtn" title="ê²€ìƒ‰(ì˜ˆì •)">ğŸ”</div>
    </div>

    <!-- í™ˆ: ìƒíƒœ ìš”ì•½ -->
    <div class="card">
      <div class="label">ì˜¤ëŠ˜ ìƒíƒœ ìš”ì•½</div>

      <div class="center">
        <div id="gauge" class="gauge">
          <div id="score" class="score">76</div>
        </div>
        <div id="state" class="state">ì•ˆì •</div>
        <div id="summary" class="summary">í˜„ì¬ ë³´ìœ  ì¢…ëª©ì€ ê´€ë¦¬ ê°€ëŠ¥í•œ íë¦„ì…ë‹ˆë‹¤. ê¸‰í•œ í–‰ë™ì€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.</div>
      </div>

      <button id="runBtn" class="btn">ë¶„ì„ ì‹¤í–‰</button>
    </div>

    <!-- ë°°ë„ˆ ê´‘ê³ : ê²ŒìŠ¤íŠ¸ëŠ” í•­ìƒ ON / íšŒì›ì€ ê¸°ë³¸ ON, 1ë¶„ ê´‘ê³  ë³´ë©´ 24ì‹œê°„ OFF -->
    <div id="adBox" class="card adBar">
      <div class="adTitle">ë°°ë„ˆ ê´‘ê³ </div>
      <div class="adBody" id="adMsg"></div>

      <div class="adActions">
        <button id="watchAdBtn" class="chipBtn primary">1ë¶„ ê´‘ê³  ë³´ê³  24ì‹œê°„ ì œê±°</button>
        <button id="loginBtn" class="chipBtn">ë¡œê·¸ì¸(í…ŒìŠ¤íŠ¸)</button>
        <button id="logoutBtn" class="chipBtn">ë¡œê·¸ì•„ì›ƒ</button>
      </div>

      <div class="mini" id="adTimer" style="margin-top:10px;"></div>
    </div>

    <!-- ì €ì¥ ë¦¬ìŠ¤íŠ¸: ê²ŒìŠ¤íŠ¸ ì ê¸ˆ -->
    <div class="card lockWrap" id="saveCard">
      <div class="label">ì €ì¥ ë¦¬ìŠ¤íŠ¸</div>
      <div class="mini">ê´€ì‹¬ ì¢…ëª© ì €ì¥/ì‚­ì œ/ì •ë ¬(íšŒì› ê¸°ëŠ¥). ì§€ê¸ˆì€ UI ìë¦¬ë§Œ ì¡ì•„ë‘ .</div>

      <div class="lockOverlay" id="saveLock">
        <div class="msg">ê²ŒìŠ¤íŠ¸ëŠ” ì €ì¥ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ ë¶ˆê°€</div>
        <div class="sub">ë¡œê·¸ì¸ íšŒì›ë§Œ ì €ì¥/ì‚­ì œ/ì •ë ¬ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
        <button class="chipBtn primary" onclick="fakeLogin()">ë¡œê·¸ì¸í•˜ê¸°</button>
      </div>
    </div>

    <!-- ì•Œë¦¼: ê²ŒìŠ¤íŠ¸ ì ê¸ˆ -->
    <div class="card lockWrap" id="alarmCard">
      <div class="label">ì•Œë¦¼</div>
      <div class="mini">ì ìˆ˜ ë³€ë™/ë¦¬ìŠ¤í¬ ìƒìŠ¹ ì•Œë¦¼(íšŒì› ê¸°ëŠ¥). ì§€ê¸ˆì€ UI ìë¦¬ë§Œ ì¡ì•„ë‘ .</div>

      <div class="lockOverlay" id="alarmLock">
        <div class="msg">ê²ŒìŠ¤íŠ¸ëŠ” ì•Œë¦¼ ë¶ˆê°€</div>
        <div class="sub">ë¡œê·¸ì¸ íšŒì›ë§Œ ì•Œë¦¼ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
        <button class="chipBtn primary" onclick="fakeLogin()">ë¡œê·¸ì¸í•˜ê¸°</button>
      </div>
    </div>

  </div>

  <div class="bottomNav">
    <div class="bottomInner">
      <div class="navItem active">í™ˆ</div>
      <div class="navItem">í¬íŠ¸í´ë¦¬ì˜¤</div>
      <div class="navItem">ê²€ìƒ‰</div>
      <div class="navItem">ì„¤ì •</div>
    </div>
  </div>

<script>
  // ====== íšŒì›/ê´‘ê³  ì œê±°(24ì‹œê°„) ë¡œì§ ======
  const DAY_MS = 24 * 60 * 60 * 1000;
  const AD_REMOVE_UNTIL_KEY = "ad_remove_until";
  const MEMBER_KEY = "member";

  function isMember(){
    return localStorage.getItem(MEMBER_KEY) === "true";
  }

  // "1ë¶„ ê´‘ê³  ì‹œì²­"ì€ ì‹¤ì œ ê´‘ê³  SDK ëŒ€ì‹ , ì§€ê¸ˆì€ íƒ€ì´ë¨¸ë¡œ ì‹œë®¬ë ˆì´ì…˜
  async function watchAdOneMinute(){
    // 60ì´ˆ ê¸°ë‹¤ë¦¬ëŠ” ëŒ€ì‹ , ì§€ê¸ˆì€ 3ì´ˆë¡œ í…ŒìŠ¤íŠ¸(ì›í•˜ë©´ 60ì´ˆë¡œ ë°”ê¿”)
    const TEST_SECONDS = 3; // â† ì‹¤ì œëŠ” 60ìœ¼ë¡œ ë°”ê¾¸ë©´ ë¨
    return new Promise(resolve => setTimeout(resolve, TEST_SECONDS * 1000));
  }

  function adRemoved(){
    const until = Number(localStorage.getItem(AD_REMOVE_UNTIL_KEY) || "0");
    return Date.now() < until;
  }

  function setAdRemoved24h(){
    localStorage.setItem(AD_REMOVE_UNTIL_KEY, String(Date.now() + DAY_MS));
  }

  function remainingMs(){
    const until = Number(localStorage.getItem(AD_REMOVE_UNTIL_KEY) || "0");
    return Math.max(0, until - Date.now());
  }

  function fmtMs(ms){
    const s = Math.floor(ms/1000);
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    return `${h}ì‹œê°„ ${m}ë¶„`;
  }

  function renderAd(){
    const adBox = document.getElementById("adBox");
    const adMsg = document.getElementById("adMsg");
    const adTimer = document.getElementById("adTimer");
    const watchBtn = document.getElementById("watchAdBtn");

    // ê²ŒìŠ¤íŠ¸: ë°°ë„ˆ í•­ìƒ í‘œì‹œ, ì œê±° ë¶ˆê°€
    if(!isMember()){
      adBox.style.display = "block";
      adMsg.textContent = "ê²ŒìŠ¤íŠ¸ëŠ” ë°°ë„ˆê´‘ê³ ê°€ í•­ìƒ í‘œì‹œë©ë‹ˆë‹¤. (ì €ì¥/ì•Œë¦¼ì€ íšŒì› ì „ìš©)";
      adTimer.textContent = "";
      watchBtn.disabled = true;
      watchBtn.style.opacity = .55;
      return;
    }

    // íšŒì›: 24ì‹œê°„ ì œê±° ìƒíƒœë©´ ìˆ¨ê¹€
    if(adRemoved()){
      adBox.style.display = "none";
      return;
    }

    // íšŒì›: ê¸°ë³¸ì€ í‘œì‹œ
    adBox.style.display = "block";
    adMsg.textContent = "íšŒì›ì€ 1ë¶„ ê´‘ê³  ì‹œì²­ ì‹œ, ë°°ë„ˆê´‘ê³ ê°€ 24ì‹œê°„ ì œê±°ë©ë‹ˆë‹¤.";
    const left = remainingMs();
    adTimer.textContent = left > 0 ? `ê´‘ê³  ì œê±° ë‚¨ì€ ì‹œê°„: ${fmtMs(left)}` : "";
    watchBtn.disabled = false;
    watchBtn.style.opacity = 1;
  }

  function renderLocks(){
    const saveLock = document.getElementById("saveLock");
    const alarmLock = document.getElementById("alarmLock");

    const locked = !isMember();
    saveLock.style.display = locked ? "flex" : "none";
    alarmLock.style.display = locked ? "flex" : "none";
  }

  // ====== ê²Œì´ì§€(ìƒ˜í”Œ) ======
  const gauge = document.getElementById("gauge");
  const scoreEl = document.getElementById("score");
  const stateEl = document.getElementById("state");
  const summaryEl = document.getElementById("summary");

  function setGauge(score){
    const s = Math.max(0, Math.min(100, score));
    scoreEl.textContent = s;

    let state="ì•ˆì •", color="var(--good)", msg="í˜„ì¬ ë³´ìœ  ì¢…ëª©ì€ ê´€ë¦¬ ê°€ëŠ¥í•œ íë¦„ì…ë‹ˆë‹¤. ê¸‰í•œ í–‰ë™ì€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.";
    if(s < 40){ state="ê²½ê³ "; color="var(--bad)"; msg="ë¶ˆì•ˆ ì‹ í˜¸ê°€ ì»¤ì¡ŒìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ë¬´ë¦¬í•œ ë§¤ë§¤ë¥¼ í”¼í•˜ê³  ë¦¬ìŠ¤í¬ë¥¼ ì¤„ì´ì„¸ìš”."; }
    else if(s < 70){ state="ì£¼ì˜"; color="var(--warn)"; msg="ë‹¨ê¸° ë³€ë™ì„±ì´ ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„íšëŒ€ë¡œ ì²œì²œíˆ í™•ì¸í•˜ì„¸ìš”."; }

    stateEl.textContent = state;
    summaryEl.textContent = msg;

    const deg = Math.round((s/100)*360);
    gauge.style.background = `conic-gradient(${color} 0deg ${deg}deg, rgba(255,255,255,.12) ${deg}deg 360deg)`;
  }

  document.getElementById("runBtn").addEventListener("click", ()=>{
    setGauge(Math.floor(Math.random()*101));
  });

  // ====== í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ======
  function fakeLogin(){
    localStorage.setItem(MEMBER_KEY, "true");
    renderAd();
    renderLocks();
    alert("ë¡œê·¸ì¸ ì²˜ë¦¬ë¨(í…ŒìŠ¤íŠ¸). ì´ì œ ì €ì¥/ì•Œë¦¼ ì‚¬ìš© ê°€ëŠ¥. ê´‘ê³ ëŠ” 1ë¶„ ì‹œì²­ ì‹œ 24ì‹œê°„ ì œê±°.");
  }
  window.fakeLogin = fakeLogin;

  document.getElementById("loginBtn").addEventListener("click", fakeLogin);

  document.getElementById("logoutBtn").addEventListener("click", ()=>{
    localStorage.setItem(MEMBER_KEY, "false");
    // íšŒì›ì´ ë¡œê·¸ì•„ì›ƒí•´ë„ ê´‘ê³ ì œê±° íƒ€ì´ë¨¸ëŠ” ë‚¨ê²¨ë‘ë˜, ê²ŒìŠ¤íŠ¸ëŠ” ì œê±° ë¶ˆê°€ì´ë¯€ë¡œ í‘œì‹œë¨
    renderAd();
    renderLocks();
    alert("ë¡œê·¸ì•„ì›ƒ(ê²ŒìŠ¤íŠ¸). ë°°ë„ˆ ê´‘ê³  í•­ìƒ í‘œì‹œ + ì €ì¥/ì•Œë¦¼ ì ê¹€.");
  });

  document.getElementById("watchAdBtn").addEventListener("click", async ()=>{
    if(!isMember()) return;

    const btn = document.getElementById("watchAdBtn");
    btn.disabled = true;
    btn.textContent = "ê´‘ê³  ì‹œì²­ ì¤‘â€¦";

    try{
      await watchAdOneMinute();
      setAdRemoved24h();
      alert("ì™„ë£Œ! ë°°ë„ˆê´‘ê³ ê°€ 24ì‹œê°„ ì œê±°ë©ë‹ˆë‹¤.");
    }finally{
      btn.textContent = "1ë¶„ ê´‘ê³  ë³´ê³  24ì‹œê°„ ì œê±°";
      btn.disabled = false;
      renderAd();
    }
  });

  // 1ë¶„ë§ˆë‹¤ ìƒíƒœ ê°±ì‹ 
  setInterval(renderAd, 60*1000);

  // ì´ˆê¸°
  if(localStorage.getItem(MEMBER_KEY) === null){
    localStorage.setItem(MEMBER_KEY, "false");
  }
  setGauge(76);
  renderAd();
  renderLocks();
</script>
</body>
</html>
